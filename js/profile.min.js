var a = location.href, filtr = a.substring(a.indexOf("?") + 1), regex = new RegExp(filtr, "i"); $.getJSON("data/person_data.json", function (a) { $.each(a, function (a, e) { (-1 != e.user_name.search(regex) || -1 != e.company.search(regex)) && ($(".profile_img img").attr("src", e.avatar), $(".profile_name").html(e.first_name + " " + e.last_name), $(".profile_info").html(e.job + ", " + e.company + " Company")) }) }), $.ajax({ type: "GET", url: "data/person_data.json", beforeSend: function () { $(".loadeing").html("<img src='images/preloader_1.gif' />") }, success: function (a) { for (var e = Math.floor(100 * Math.random() + 1), i = e; e + 5 > i; i++) $(".sug_users").append('<div class="item"> <div class="ui tiny image"> <img src="' + a[i].avatar + '"> </div> <div class="content"> <a class="header" onclick="open_modal(\'' + a[i].user_name + "','" + a[i].id + "','" + a[i].avatar + "')\"> " + a[i].first_name + " " + a[i].last_name + '</a> <div class="meta"> <span>' + a[i].job + '</span> </div> <div class="description"> <p></p> </div> <div class="extra"><button class="ui greenli inverted tiny button follow">Follow</button> </div> </div> </div>') }, complete: function () { $(".loadeing").html('<img src="images/logo.png" class="ui mini image" />'), $(".follow").on("click", function () { $(this).addClass("loading").delay(500).queue(function () { $(this).removeClass("loading").dequeue() }) }).state({ text: { inactive: "Follow", active: "Following" } }) } });